!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,(function(){return function(e){function t(t){for(var a,i,o=t[0],l=t[1],u=t[2],m=0,_=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&_.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(s&&s(t);_.length;)_.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},c=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./";var o=this.webpackJsonp=this.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var s=l;return c.push([217,1]),n()}({120:function(e,t,n){var a=n(123),r=n(345);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},186:function(e,t,n){e.exports=function(){return new Worker(n.p+"worker.9870d43c135a95da49cc.js")}},192:function(e,t,n){var a=n(123),r=n(306);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},217:function(e,t,n){n(218),e.exports=n(419)},245:function(e,t,n){(t=n(124)(!1)).push([e.i,".index__time___1Kdnf {\n  color: rgba(0, 0, 0, 0.25);\n  font-style: normal;\n  font-size: 14px;\n  text-align: left;\n}\n.index__subTitle___3fSHC {\n  font-size: 40px;\n}\n.index__center___3SbbJ {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 180px;\n}\n.index__row___137le {\n  margin-bottom: 12px;\n}\n.index__label____u1OQ {\n  line-height: 32px;\n  margin-right: 8px;\n}\n.index__card___33UVw {\n  min-height: 400px;\n}\n\n.index__back___3vNX_ {\n  margin-right: 8px;\n}\n.index__space___2Ky-K {\n  width: 100%;\n}\n\n.index__container___2gzlG {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.index__layout___1GxrO {\n  background-color: transparent;\n  width: 100%;\n  vertical-align: top;\n  max-width: 952px;\n}\n.index__header___1awbu {\n  width: 100%;\n  padding: 0px;\n}\n.index__header___1awbu .ant-row {\n  background-color: #fff;\n  color: rgba(0, 0, 0, 0.85);\n  font-weight: 600;\n  font-size: 20px;\n  padding: 0 24px;\n}\n\n.index__content___R7vNX {\n  padding: 12px 0px;\n}\n\n@media (max-width: 992px) {\n  .index__content___R7vNX {\n    padding: 12px;\n  }\n}\n",""]),t.locals={time:"index__time___1Kdnf",subTitle:"index__subTitle___3fSHC",center:"index__center___3SbbJ",row:"index__row___137le",label:"index__label____u1OQ",card:"index__card___33UVw",back:"index__back___3vNX_",space:"index__space___2Ky-K",container:"index__container___2gzlG",layout:"index__layout___1GxrO",header:"index__header___1awbu",content:"index__content___R7vNX"},e.exports=t},29:function(e,t,n){var a=n(123),r=n(245);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},306:function(e,t,n){(t=n(124)(!1)).push([e.i,".list__current___2DlKi {\n  background-color: #ffd6e7;\n  color: black;\n  font-weight: bold;\n}\n",""]),t.locals={current:"list__current___2DlKi"},e.exports=t},345:function(e,t,n){(t=n(124)(!1)).push([e.i,".search__container___1yZLk {\n  padding-top: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.search__form___2FF0h {\n  max-width: 952px;\n  width: 100%;\n}\n\n.search__button___2kEqm .ant-form-item-control {\n  display: flex;\n  align-items: center;\n}\n",""]),t.locals={container:"search__container___1yZLk",form:"search__form___2FF0h",button:"search__button___2kEqm"},e.exports=t},417:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),i=n.n(c),o=n(42),l=n(184),u=n.n(l),s=n(106),m=n.n(s),_=n(43),d=n(24),f=n(72),p=n(157),b=n(185),h={};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=Object(d.b)(),y=Object(_.c)({router:Object(f.b)(v),search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":t.type;var n=m()(t,["type"]);return g(g({},e),n);default:return e}}}),x=Object(_.d)(Object(_.a)(Object(p.a)(v)),Object(_.a)(b.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),O=Object(_.e)(y,h,x),j=n(7),w=n(53),k=n.n(w),N=n(80),S=n(38),C=n(422),P=n(426),T=n(197),D=n(427),R=n(51),M=n(81),z=n(425),I=n(420),F=n(428),K=n(432),X=n(429),H={icon:"./notification.png",vibrate:[200,100,200],renotify:!0,tag:"notify"},G=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){try{if(!("Notification"in window))return void console.log("This browser does not support desktop notification");Notification.requestPermission((function(t){"granted"===t&&(e.current=!0)}))}catch(e){}}),[]),Object(a.useCallback)((function(t){try{e.current&&new Notification(t,H)}catch(e){}}),[])},q=n(186),A=n.n(q),L=n(29),U=n.n(L),V=n(424),B=n(431);function J(e){var t=Object(a.useState)(!1),n=k()(t,2),c=n[0],i=n[1],o=Object(a.useCallback)((function(){i((function(e){return!e}))}),[]);return Object(a.useEffect)((function(){i(e.visible)}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{shape:"round",onClick:o,icon:r.a.createElement(B.a,null)},"系統通知"),r.a.createElement(V.a,{title:"系統通知",visible:c,onCancel:o,footer:[r.a.createElement(R.a,{key:"submit",type:"primary",onClick:o},"關閉")]},e.children))}var W=r.a.memo(J),Q=n(144),Y=n.n(Q),Z=n(430),$=n(423),ee=n(192),te=n.n(ee);function ne(e){var t=e.data,n=void 0===t?[]:t,a=e.current_number,c=void 0===a?0:a;return r.a.createElement($.b,{bordered:!0,dataSource:n,renderItem:function(e){var t,n="".concat(e.number," ").concat(e.message),a=function(e){var t="";switch(e){case"registered":t="warning";break;case"success":t="success";break;case"cancel":default:t="default"}return t}(e.status);return e.number==c&&(a="processing",t=te.a.current),r.a.createElement($.b.Item,{key:e.number,className:t},r.a.createElement(Z.a,{status:a,text:n}))}})}var ae,re=r.a.memo(ne),ce=n(54),ie=n.n(ce),oe=n(79),le=n.n(oe),ue=(n(330),X.a.Header),se=X.a.Content,me=r.a.memo((function(e){var t=Object(j.g)(),n=Object(a.useCallback)((function(){t.push("/appointment")}),[]);return r.a.createElement(N.a,{className:U.a.title},r.a.createElement(S.a,{xs:24},r.a.createElement(R.a,{type:"primary",shape:"circle",onClick:n,icon:r.a.createElement(K.a,null),className:U.a.back,size:"large"}),e.room))}));function _e(){var e=Object(j.h)(),t=e.room,n=e.timecode,c=Object(a.useState)({current_number:0}),i=k()(c,2),o=i[0],l=i[1],u=Object(a.useState)(0),s=k()(u,2),m=s[0],_=s[1],d=Object(a.useState)({percent:100,status:"normal",waiting:0}),f=k()(d,2),p=f[0],b=f[1],h=Object(a.useState)(!1),E=k()(h,2),g=E[0],v=E[1],y=Object(a.useState)(!1),x=k()(y,2),O=x[0],w=x[1],R=G(),K=Object(a.useCallback)((function(e){var t=ie.a.toNumber(e.target.value);requestAnimationFrame((function(){return _(t)}))}),[]),H=Object(a.useCallback)((function(e){e.preventDefault(),e.currentTarget.blur()}),[]);Object(a.useEffect)((function(){return ie.a.isEmpty(o)||v(!0),(ae=new A.a).postMessage({type:"fetch",room:t,timeCode:n}),ae.onmessage=function(e){var t=e.data;l(t),v(!1)},function(){ae&&ae.terminate()}}),[t,n]);var q=r.a.createElement(me,{room:o.room}),L=Object(a.useMemo)((function(){switch(n){case"1":return"上午";case"2":return"下午";case"3":return"晚上"}}),[n]);Object(a.useEffect)((function(){var e,t=ie.a.subtract(m,o.current_number),n=100*ie.a.divide(o.current_number,m),a=ie.a.size(ie.a.filter(o.appointment_list,(function(e){return"unregistered"==e.status&&e.number>=o.current_number&&e.number<m})));switch(!0){case t<=20&&t>0:e="exception";break;case 0==t:e="success";break;default:e="active"}b({percent:n=t>0?n:100,status:e,waiting:a})}),[m,o.current_number]),Object(a.useEffect)((function(){O&&R("診間目前燈號: ".concat(o.current_number))}),[O,o.current_number]);var V=Object(a.useMemo)((function(){return"error"==o.type?r.a.createElement(M.a,{image:M.a.PRESENTED_IMAGE_SIMPLE,description:"查無資料"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:U.a.row},r.a.createElement(S.a,{xs:24},r.a.createElement(I.a,{direction:"vertical"},r.a.createElement(le.a,{data:["看診時段",L]}),r.a.createElement(le.a,{data:["最近更新",Y()().format("MM-DD HH:mm")]}),r.a.createElement(le.a,{data:["總人數",o.total]}),r.a.createElement(le.a,{data:["未看診人數",ie.a.size(o.unregistered)]}),p.waiting?r.a.createElement(le.a,{data:["可能等待人數",p.waiting]}):null)),r.a.createElement(S.a,{xs:24},r.a.createElement("div",{className:U.a.center},r.a.createElement(P.a,{type:"circle",percent:p.percent,status:p.status,width:180,strokeWidth:8,format:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:U.a.subTitle},"".concat(o.current_number)))}})))),r.a.createElement(N.a,null,r.a.createElement(W,null,r.a.createElement(I.a,{direction:"vertical"},r.a.createElement("div",null,r.a.createElement(z.a,{checkedChildren:"開啟",unCheckedChildren:"關閉",defaultChecked:O,onChange:function(e){return w(e)}})),r.a.createElement(D.a,{style:{width:100},min:0,max:1024,type:"number",placeholder:"就診號",onChange:K,onPressEnter:H})))))}),[o,p]);return r.a.createElement("div",{className:U.a.container},r.a.createElement(X.a,{className:U.a.layout},r.a.createElement(ue,{className:U.a.header},q),r.a.createElement(se,{className:U.a.content},r.a.createElement(I.a,{direction:"vertical",className:U.a.space,size:12},r.a.createElement(C.a,{loading:!o.init,className:U.a.card},r.a.createElement(T.a,{spinning:g},V)),r.a.createElement(C.a,{loading:!o.init,className:U.a.card},r.a.createElement(T.a,{spinning:g},r.a.createElement(re,{data:o.list,current_number:o.current_number}))),r.a.createElement(F.a,null)))))}var de=r.a.memo(_e),fe=Object(o.c)((function(e){return{}}),(function(e){return{}}))(de),pe=n(20),be=n(94),he=n(433),Ee=n(421),ge=n(120),ve=n.n(ge),ye=be.a.Option;function xe(e){var t=e.room,n=e.timecode,a=e.onFinish;return r.a.createElement("div",{className:ve.a.container},r.a.createElement(C.a,{className:ve.a.form},r.a.createElement(Ee.a,{onFinish:a,name:"search",initialValues:{room:t,timecode:n}},r.a.createElement(Ee.a.Item,{name:"room",rules:[{required:!0,message:"請輸入診間號"}]},r.a.createElement(D.a,{placeholder:"診間號碼",type:"number",prefix:r.a.createElement(he.a,null)})),r.a.createElement(Ee.a.Item,{name:"timecode",rules:[{required:!0,message:"請選擇時段"}]},r.a.createElement(be.a,{placeholder:"看診時段"},r.a.createElement(ye,{value:"1"},"上午"),r.a.createElement(ye,{value:"2"},"下午"),r.a.createElement(ye,{value:"3"},"晚上"))),r.a.createElement(Ee.a.Item,{className:ve.a.button},r.a.createElement(R.a,{type:"primary",htmlType:"submit"},"查詢")))))}var Oe=r.a.memo(xe),je=Object(o.c)((function(e){return{timecode:e.search.timecode,room:e.search.room}}),(function(e){return{onFinish:function(t){var n=t.room,a=t.timecode;e({type:"SET_SEARCH",room:n,timecode:a}),e(Object(pe.d)("/appointment/".concat(n,"/").concat(a)))}}}))(Oe),we=n(209),ke=n.n(we),Ne=n(210),Se=n.n(Ne),Ce=n(211),Pe=n.n(Ce),Te=n(212),De=n.n(Te),Re=n(153),Me=n.n(Re),ze=n(213),Ie=n.n(ze),Fe=n(1),Ke=n.n(Fe),Xe=n(147),He={404:{img:"https://gw.alipayobjects.com/zos/rmsportal/KpnpchXsobRgLElEozzI.svg",title:"PAGE NOT FOUND",desc:"The link you clicked may be broken or the page may have been removed"},500:{img:"https://gw.alipayobjects.com/zos/rmsportal/RVRUAYdCGeYNBWoKiIwB.svg",title:"500",desc:"功能建置中"}},Ge=(n(417),function(e){var t=e.className,n=(e.linkElement,e.type),a=e.title,c=e.desc,i=e.img,o=e.actions,l=m()(e,["className","linkElement","type","title","desc","img","actions"]),u=n in He?n:"404",s=Ke()("exception",t);return r.a.createElement("div",Ie()({className:s},l),r.a.createElement("div",{className:"imgBlock"},r.a.createElement("div",{className:"imgEle",style:{backgroundImage:"url(".concat(i||He[u].img,")")}})),r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,a||He[u].title),r.a.createElement("div",{className:"desc"},c||He[u].desc),r.a.createElement("div",{className:"actions"},o||r.a.createElement(Xe.a,{to:"/"},r.a.createElement(R.a,{type:"primary"},"HomePage")))))});function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Me()(e);if(t){var r=Me()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return De()(this,n)}}var Ae=function(e){Pe()(n,e);var t=qe(n);function n(e){return ke()(this,n),t.call(this,e)}return Se()(n,[{key:"render",value:function(){return r.a.createElement(Ge,null)}}]),n}(r.a.PureComponent),Le=function(){return r.a.createElement(f.a,{history:v},r.a.createElement(j.d,null,r.a.createElement(j.b,{exact:!0,path:"/",render:function(){return r.a.createElement(j.a,{to:"/appointment"})}}),r.a.createElement(j.b,{exact:!0,path:"/appointment",component:je}),r.a.createElement(j.b,{exact:!0,path:"/appointment/:room/:timecode",component:fe}),r.a.createElement(j.b,{path:"*",component:Ae})))};n(418);i.a.render(r.a.createElement(o.a,{store:O},r.a.createElement(Le,null)),document.getElementById("index"))}})}));