!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,(function(){return function(e){function t(t){for(var a,o,l=t[0],i=t[1],u=t[2],m=0,_=[];m<l.length;m++)o=l[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&_.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(s&&s(t);_.length;)_.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==r[i]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var l=this.webpackJsonp=this.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var s=i;return c.push([190,1]),n()}({177:function(e,t,n){e.exports=function(){return new Worker(n.p+"worker.9c808f5b9dc1db50712b.js")}},190:function(e,t,n){e.exports=n(445)},215:function(e,t,n){(t=n(128)(!1)).push([e.i,".index__time___1l8Y2 {\n  color: rgba(0, 0, 0, 0.25);\n  font-style: normal;\n  font-size: 14px;\n  text-align: left;\n}\n.index__subTitle___3Mm4P {\n  font-size: 40px;\n}\n.index__center___24yEr {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 180px;\n}\n.index__row___hMNoQ {\n  margin-bottom: 12px;\n}\n.index__label___3H-Tm {\n  line-height: 32px;\n  margin-right: 8px;\n}\n.index__card___1B6WF {\n  min-height: 400px;\n}\n\n.index__back___1LoGx {\n  margin-right: 8px;\n}\n",""]),t.locals={time:"index__time___1l8Y2",subTitle:"index__subTitle___3Mm4P",center:"index__center___24yEr",row:"index__row___hMNoQ",label:"index__label___3H-Tm",card:"index__card___1B6WF",back:"index__back___1LoGx"},e.exports=t},26:function(e,t,n){var a=n(127),r=n(215);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},364:function(e,t,n){(t=n(128)(!1)).push([e.i,".search__form___31UY4 {\n  max-width: 600px;\n}\n\n.search__content___14sR2 {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.search__button___yeNEu .ant-form-item-control{\n  display: flex;\n  align-items: center;\n}\n",""]),t.locals={form:"search__form___31UY4",content:"search__content___14sR2",button:"search__button___yeNEu"},e.exports=t},443:function(e,t,n){},445:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),l=n(62),i=n(25),u=n(20),s=n(85),m=n(121),_=n(174),f={},p=Object(u.a)(),d=Object(i.c)({router:Object(s.b)(p)}),b=Object(i.d)(Object(i.a)(Object(m.a)(p)),Object(i.a)(_.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),E=Object(i.e)(d,f,b),h=n(15),x=(n(122),n(61)),v=n.n(x),y=(n(125),n(83)),g=n.n(y),O=(n(126),n(84)),j=n.n(O),w=(n(207),n(183)),N=n.n(w),k=n(176),M=n.n(k),S=n(63),T=n.n(S),P=(n(123),n(35)),R=n.n(P),D=(n(124),n(36)),I=n.n(D),C=(n(89),n(59)),F=n.n(C),z=n(451),H=n(177),L=n.n(H),U=n(26),W=n.n(U),X=n(178),Y=n.n(X),q=(n(216),n(82)),B=n.n(q),V=(n(222),n(181)),G=n.n(V);var J,Q=r.a.memo((function(e){var t=e.data,n=e.current_number;return r.a.createElement(B.a,{bordered:!0,dataSource:t,renderItem:function(e){var t="".concat(e.number," ").concat(e.message,"}"),a=function(e){var t="";switch(e){case"registered":t="warning";break;case"success":t="success";break;case"cancel":default:t="default"}return t}(e.status);return number==n&&(a="processing"),r.a.createElement(B.a.Item,null,r.a.createElement(G.a,{status:a,text:t}))}})})),A=n(38),K=n.n(A),Z=n(64),$=n.n(Z),ee=(n(315),r.a.memo((function(e){var t=Object(h.f)(),n=Object(a.useCallback)((function(){t.push("/appointment")}),[]);return r.a.createElement(R.a,{className:W.a.title},r.a.createElement(I.a,{xs:24},r.a.createElement(F.a,{type:"primary",shape:"circle",onClick:n,icon:r.a.createElement(z.a,null),className:W.a.back,size:"large"}),e.room))}))),te=function(e){e.currentTarget.blur()};var ne=r.a.memo((function(){var e=Object(h.g)(),t=e.room,n=e.timecode,c=Object(a.useState)({current_number:0}),o=T()(c,2),l=o[0],i=o[1],u=Object(a.useState)(0),s=T()(u,2),m=s[0],_=s[1],f=Object(a.useState)({percent:100,status:"normal"}),p=T()(f,2),d=p[0],b=p[1],E=Object(a.useState)(!1),x=T()(E,2),y=x[0],O=x[1],w=Object(a.useCallback)((function(e){var t=K.a.toNumber(e.target.value);requestAnimationFrame((function(){return _(t)}))}),[]);Object(a.useEffect)((function(){return K.a.isEmpty(l)||O(!0),(J=new L.a).postMessage({type:"fetch",room:t,timeCode:n}),J.onmessage=function(e){var t=e.data,n=t.type,a=M()(t,["type"]);"success"==n&&i(a),O(!1)},function(){J&&J.terminate()}}),[t,n]);var k=r.a.createElement(ee,{room:l.room}),S=Object(a.useMemo)((function(){switch(n){case"1":return"上午";case"2":return"下午";case"3":return"晚上"}}),[n]);Object(a.useEffect)((function(){var e,t=K.a.subtract(m,l.current_number),n=100*K.a.divide(l.current_number,m);switch(!0){case t<=20&&t>0:e="exception";break;case 0==t:e="success";break;default:e="active"}b({percent:n=t>0?n:100,status:e})}),[m,l.current_number]);var P=Object(a.useMemo)((function(){return K.a.isEmpty(l.room)}),[l.room]);return r.a.createElement("div",null,r.a.createElement(R.a,{className:W.a.row},r.a.createElement(I.a,{xs:24},r.a.createElement(v.a,{title:k,loading:P,className:W.a.card},r.a.createElement(g.a,{spinning:y},r.a.createElement(R.a,{className:W.a.row},r.a.createElement(I.a,{xs:24},r.a.createElement("div",null,r.a.createElement($.a,{data:["看診時段",S]})),r.a.createElement("div",null,r.a.createElement($.a,{data:["最近更新",Y()().format("MM-DD HH:mm")]})),r.a.createElement("div",null,r.a.createElement($.a,{data:["總人數",l.total]})),r.a.createElement("div",null,r.a.createElement($.a,{data:["過號人數",K.a.size(l.register)]}))),r.a.createElement(I.a,{xs:24},r.a.createElement("div",{className:W.a.center},r.a.createElement(N.a,{type:"circle",percent:d.percent,status:d.status,width:180,strokeWidth:8,format:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.subTitle},"".concat(l.current_number)))}})))),r.a.createElement(R.a,null,r.a.createElement(j.a,{style:{width:100},min:0,max:1024,type:"number",placeholder:"就診號",onChange:w,onPressEnter:te})))))),r.a.createElement(R.a,{className:W.a.row},r.a.createElement(I.a,{xs:24},r.a.createElement(v.a,{loading:P},r.a.createElement(g.a,{spinning:y},r.a.createElement(Q,{data:l.list,current_number:l.current_number}))))))})),ae=(n(362),n(65)),re=n.n(ae),ce=(n(130),n(56)),oe=n.n(ce),le=n(452),ie=n(87),ue=n.n(ie),se=oe.a.Option;var me=r.a.memo((function(){var e=Object(h.f)(),t=Object(a.useCallback)((function(t){var n=t.room,a=t.timecode;e.push("/appointment/".concat(n,"/").concat(a))}),[]);return r.a.createElement(v.a,null,r.a.createElement("div",{className:ue.a.content},r.a.createElement(re.a,{onFinish:t,name:"search",initialValues:{timecode:"1"},className:ue.a.form},r.a.createElement(re.a.Item,{label:"看診時段",name:"timecode",rules:[{required:!0}]},r.a.createElement(oe.a,null,r.a.createElement(se,{value:"1"},"上午"),r.a.createElement(se,{value:"2"},"下午"),r.a.createElement(se,{value:"3"},"晚上"))),r.a.createElement(re.a.Item,{label:"診間號碼",name:"room",rules:[{required:!0,message:"請輸入診間號"}]},r.a.createElement(j.a,{prefix:r.a.createElement(le.a,null)})),r.a.createElement(re.a.Item,{className:ue.a.button},r.a.createElement(F.a,{type:"primary",htmlType:"submit"},"查詢")))))})),_e=n(184),fe=n.n(_e),pe=n(185),de=n.n(pe),be=n(186),Ee=n.n(be),he=n(187),xe=n.n(he),ve=n(119),ye=n.n(ve);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ye()(e);if(t){var r=ye()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return xe()(this,n)}}var Oe=function(e){Ee()(n,e);var t=ge(n);function n(e){return fe()(this,n),t.call(this,e)}return de()(n,[{key:"render",value:function(){return r.a.createElement("div",null,"404")}}]),n}(r.a.PureComponent),je=function(){return r.a.createElement(s.a,{history:p},r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(h.a,{to:"/appointment"})}}),r.a.createElement(h.b,{exact:!0,path:"/appointment",component:me}),r.a.createElement(h.b,{exact:!0,path:"/appointment/:room/:timecode",component:ne}),r.a.createElement(h.b,{path:"*",component:Oe})))};n(443);o.a.render(r.a.createElement(l.a,{store:E},r.a.createElement(je,null)),document.getElementById("index"))},87:function(e,t,n){var a=n(127),r=n(364);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}}})}));