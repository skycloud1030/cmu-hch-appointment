!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,(function(){return function(e){function t(t){for(var a,o,i=t[0],l=t[1],u=t[2],m=0,f=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(s&&s(t);f.length;)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var i=this.webpackJsonp=this.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;return c.push([196,1]),n()}({104:function(e,t,n){var a=n(138),r=n(313);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},165:function(e,t,n){e.exports=function(){return new Worker(n.p+"worker.16dfae4f6fc6a3f8bde2.js")}},196:function(e,t,n){n(197),e.exports=n(388)},224:function(e,t,n){(t=n(139)(!1)).push([e.i,".index__time___1Kdnf {\n  color: rgba(0, 0, 0, 0.25);\n  font-style: normal;\n  font-size: 14px;\n  text-align: left;\n}\n.index__subTitle___3fSHC {\n  font-size: 40px;\n}\n.index__center___3SbbJ {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 180px;\n}\n.index__row___137le {\n  margin-bottom: 12px;\n}\n.index__label____u1OQ {\n  line-height: 32px;\n  margin-right: 8px;\n}\n.index__card___33UVw {\n  min-height: 400px;\n}\n\n.index__back___3vNX_ {\n  margin-right: 8px;\n}\n",""]),t.locals={time:"index__time___1Kdnf",subTitle:"index__subTitle___3fSHC",center:"index__center___3SbbJ",row:"index__row___137le",label:"index__label____u1OQ",card:"index__card___33UVw",back:"index__back___3vNX_"},e.exports=t},313:function(e,t,n){(t=n(139)(!1)).push([e.i,".search__form___2FF0h {\n  max-width: 600px;\n  width: 100%;\n}\n\n.search__content___FTo3f {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.search__button___2kEqm .ant-form-item-control {\n  display: flex;\n  align-items: center;\n}\n",""]),t.locals={form:"search__form___2FF0h",content:"search__content___FTo3f",button:"search__button___2kEqm"},e.exports=t},36:function(e,t,n){var a=n(138),r=n(224);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},385:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),i=n(33),l=n(163),u=n.n(l),s=n(91),m=n.n(s),f=n(34),p=n(20),d=n(61),_=n(137),b=n(164),E={};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=Object(p.b)(),y=Object(f.c)({router:Object(d.b)(g),search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":t.type;var n=m()(t,["type"]);return v(v({},e),n);default:return e}}}),O=Object(f.d)(Object(f.a)(Object(_.a)(g)),Object(f.a)(b.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),x=Object(f.e)(y,E,O),j=n(6),w=n(45),k=n.n(w),N=n(66),S=n(30),C=n(391),P=n(394),T=n(176),D=n(395),F=n(43),I=n(67),R=n(398),M=n(389),z=n(396),H=n(400),X={icon:"./notification.png",vibrate:[200,100,200],renotify:!0,tag:"notify"},q=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){Notification.requestPermission((function(t){"granted"===t&&(e.current=!0)}))}),[]),Object(a.useCallback)((function(t){e.current&&new Notification(t,X)}),[])},A=n(165),U=n.n(A),V=n(36),B=n.n(V),J=n(393),K=n(399);var L=r.a.memo((function(e){var t=Object(a.useState)(!1),n=k()(t,2),c=n[0],o=n[1],i=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]);return Object(a.useEffect)((function(){o(e.visible)}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{shape:"round",onClick:i,icon:r.a.createElement(K.a,null)},"系統通知"),r.a.createElement(J.a,{title:"系統通知",visible:c,closable:!1,footer:[r.a.createElement(F.a,{key:"submit",type:"primary",onClick:i},"關閉")]},r.a.createElement(Space,{direction:"vertical"},r.a.createElement("div",null,r.a.createElement(Switch,{checkedChildren:"開啟",unCheckedChildren:"關閉",defaultChecked:notifySwitch,onChange:function(e){return setNotify(e)}})),r.a.createElement(Input,{style:{width:100},min:0,max:1024,type:"number",placeholder:"就診號",onChange:onChangeBooking,onPressEnter:onEnter})),e.children))})),G=n(126),W=n.n(G),Q=n(397),Y=n(392);var Z,$=r.a.memo((function(e){var t=e.data,n=e.current_number;return r.a.createElement(Y.b,{bordered:!0,dataSource:t,renderItem:function(e){var t="".concat(e.number," ").concat(e.message),a=function(e){var t="";switch(e){case"registered":t="warning";break;case"success":t="success";break;case"cancel":default:t="default"}return t}(e.status);return e.number==n&&(a="processing"),r.a.createElement(Y.b.Item,null,r.a.createElement(Q.a,{status:a,text:t}))}})})),ee=n(65),te=n.n(ee),ne=n(79),ae=n.n(ne),re=(n(302),r.a.memo((function(e){var t=Object(j.g)(),n=Object(a.useCallback)((function(){t.push("/appointment")}),[]);return r.a.createElement(N.a,{className:B.a.title},r.a.createElement(S.a,{xs:24},r.a.createElement(F.a,{type:"primary",shape:"circle",onClick:n,icon:r.a.createElement(H.a,null),className:B.a.back,size:"large"}),e.room))}))),ce=function(e){e.currentTarget.blur()};var oe=r.a.memo((function(){var e=Object(j.h)(),t=e.room,n=e.timecode,c=Object(a.useState)({current_number:0}),o=k()(c,2),i=o[0],l=o[1],u=Object(a.useState)(0),s=k()(u,2),m=s[0],f=s[1],p=Object(a.useState)({percent:100,status:"normal"}),d=k()(p,2),_=d[0],b=d[1],E=Object(a.useState)(!1),h=k()(E,2),v=h[0],g=h[1],y=Object(a.useState)(!1),O=k()(y,2),x=O[0],w=O[1],F=q(),H=Object(a.useCallback)((function(e){var t=te.a.toNumber(e.target.value);requestAnimationFrame((function(){return f(t)}))}),[]);Object(a.useEffect)((function(){return te.a.isEmpty(i)||g(!0),(Z=new U.a).postMessage({type:"fetch",room:t,timeCode:n}),Z.onmessage=function(e){var t=e.data;l(t),g(!1)},function(){Z&&Z.terminate()}}),[t,n]);var X=r.a.createElement(re,{room:i.room}),A=Object(a.useMemo)((function(){switch(n){case"1":return"上午";case"2":return"下午";case"3":return"晚上"}}),[n]);Object(a.useEffect)((function(){var e,t=te.a.subtract(m,i.current_number),n=100*te.a.divide(i.current_number,m);switch(!0){case t<=20&&t>0:e="exception";break;case 0==t:e="success";break;default:e="active"}b({percent:n=t>0?n:100,status:e})}),[m,i.current_number]),Object(a.useEffect)((function(){x&&F("診間目前燈號: ".concat(i.current_number))}),[x,i.current_number]);var V=Object(a.useMemo)((function(){return"error"==i.type?r.a.createElement(I.a,{image:I.a.PRESENTED_IMAGE_SIMPLE,description:"查無資料"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:B.a.row},r.a.createElement(S.a,{xs:24},r.a.createElement(M.a,{direction:"vertical"},r.a.createElement(ae.a,{data:["看診時段",A]}),r.a.createElement(ae.a,{data:["最近更新",W()().format("MM-DD HH:mm")]}),r.a.createElement(ae.a,{data:["總人數",i.total]}),r.a.createElement(ae.a,{data:["過號人數",te.a.size(i.register)]}))),r.a.createElement(S.a,{xs:24},r.a.createElement("div",{className:B.a.center},r.a.createElement(P.a,{type:"circle",percent:_.percent,status:_.status,width:180,strokeWidth:8,format:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:B.a.subTitle},"".concat(i.current_number)))}})))),r.a.createElement(N.a,null,r.a.createElement(L,null,r.a.createElement(M.a,{direction:"vertical"},r.a.createElement("div",null,r.a.createElement(R.a,{checkedChildren:"開啟",unCheckedChildren:"關閉",defaultChecked:x,onChange:function(e){return w(e)}})),r.a.createElement(D.a,{style:{width:100},min:0,max:1024,type:"number",placeholder:"就診號",onChange:H,onPressEnter:ce})))))}),[i,_]);return r.a.createElement("div",null,r.a.createElement(N.a,{className:B.a.row},r.a.createElement(S.a,{xs:24},r.a.createElement(C.a,{title:X,loading:!i.init,className:B.a.card},r.a.createElement(T.a,{spinning:v},V)))),r.a.createElement(N.a,{className:B.a.row},r.a.createElement(S.a,{xs:24},r.a.createElement(C.a,{loading:!i.init},r.a.createElement(T.a,{spinning:v},r.a.createElement($,{data:i.list,current_number:i.current_number})))),r.a.createElement(z.a,null)))})),ie=Object(i.c)((function(e){return{}}),(function(e){return{}}))(oe),le=n(15),ue=n(78),se=n(401),me=n(390),fe=n(104),pe=n.n(fe),de=ue.a.Option;var _e=r.a.memo((function(e){var t=e.room,n=e.timecode,a=e.onFinish;return r.a.createElement(C.a,null,r.a.createElement("div",{className:pe.a.content},r.a.createElement(me.a,{onFinish:a,name:"search",className:pe.a.form,initialValues:{room:t,timecode:n}},r.a.createElement(me.a.Item,{name:"room",rules:[{required:!0,message:"請輸入診間號"}]},r.a.createElement(D.a,{placeholder:"診間號碼",prefix:r.a.createElement(se.a,null)})),r.a.createElement(me.a.Item,{name:"timecode",rules:[{required:!0,message:"請選擇時段"}]},r.a.createElement(ue.a,{placeholder:"看診時段"},r.a.createElement(de,{value:"1"},"上午"),r.a.createElement(de,{value:"2"},"下午"),r.a.createElement(de,{value:"3"},"晚上"))),r.a.createElement(me.a.Item,{className:pe.a.button},r.a.createElement(F.a,{type:"primary",htmlType:"submit"},"查詢")))))})),be=Object(i.c)((function(e){return{timecode:e.search.timecode,room:e.search.room}}),(function(e){return{onFinish:function(t){var n=t.room,a=t.timecode;e({type:"SET_SEARCH",room:n,timecode:a}),e(Object(le.d)("/appointment/".concat(n,"/").concat(a)))}}}))(_e),Ee=n(186),he=n.n(Ee),ve=n(187),ge=n.n(ve),ye=n(188),Oe=n.n(ye),xe=n(189),je=n.n(xe),we=n(135),ke=n.n(we),Ne=n(190),Se=n.n(Ne),Ce=n(1),Pe=n.n(Ce),Te=n(129),De={404:{img:"https://gw.alipayobjects.com/zos/rmsportal/KpnpchXsobRgLElEozzI.svg",title:"PAGE NOT FOUND",desc:"The link you clicked may be broken or the page may have been removed"},500:{img:"https://gw.alipayobjects.com/zos/rmsportal/RVRUAYdCGeYNBWoKiIwB.svg",title:"500",desc:"功能建置中"}},Fe=(n(385),function(e){var t=e.className,n=(e.linkElement,e.type),a=e.title,c=e.desc,o=e.img,i=e.actions,l=m()(e,["className","linkElement","type","title","desc","img","actions"]),u=n in De?n:"404",s=Pe()("exception",t);return r.a.createElement("div",Se()({className:s},l),r.a.createElement("div",{className:"imgBlock"},r.a.createElement("div",{className:"imgEle",style:{backgroundImage:"url(".concat(o||De[u].img,")")}})),r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,a||De[u].title),r.a.createElement("div",{className:"desc"},c||De[u].desc),r.a.createElement("div",{className:"actions"},i||r.a.createElement(Te.a,{to:"/"},r.a.createElement(F.a,{type:"primary"},"HomePage")))))});function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ke()(e);if(t){var r=ke()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return je()(this,n)}}var Re=function(e){Oe()(n,e);var t=Ie(n);function n(e){return he()(this,n),t.call(this,e)}return ge()(n,[{key:"render",value:function(){return r.a.createElement(Fe,null)}}]),n}(r.a.PureComponent),Me=function(){return r.a.createElement(d.a,{history:g},r.a.createElement(j.d,null,r.a.createElement(j.b,{exact:!0,path:"/",render:function(){return r.a.createElement(j.a,{to:"/appointment"})}}),r.a.createElement(j.b,{exact:!0,path:"/appointment",component:be}),r.a.createElement(j.b,{exact:!0,path:"/appointment/:room/:timecode",component:ie}),r.a.createElement(j.b,{path:"*",component:Re})))};n(386),n(387);o.a.render(r.a.createElement(i.a,{store:x},r.a.createElement(Me,null)),document.getElementById("index"))}})}));