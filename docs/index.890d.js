!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,(function(){return function(e){function t(t){for(var a,o,i=t[0],l=t[1],u=t[2],m=0,f=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(s&&s(t);f.length;)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var i=this.webpackJsonp=this.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;return c.push([198,1]),n()}({105:function(e,t,n){var a=n(109),r=n(316);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},166:function(e,t,n){e.exports=function(){return new Worker(n.p+"worker.16dfae4f6fc6a3f8bde2.js")}},173:function(e,t,n){var a=n(109),r=n(283);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},198:function(e,t,n){n(199),e.exports=n(390)},226:function(e,t,n){(t=n(110)(!1)).push([e.i,".index__time___1Kdnf {\n  color: rgba(0, 0, 0, 0.25);\n  font-style: normal;\n  font-size: 14px;\n  text-align: left;\n}\n.index__subTitle___3fSHC {\n  font-size: 40px;\n}\n.index__center___3SbbJ {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 180px;\n}\n.index__row___137le {\n  margin-bottom: 12px;\n}\n.index__label____u1OQ {\n  line-height: 32px;\n  margin-right: 8px;\n}\n.index__card___33UVw {\n  min-height: 400px;\n}\n\n.index__back___3vNX_ {\n  margin-right: 8px;\n}\n.index__space___2Ky-K {\n  width: 100%;\n  vertical-align: top;\n  max-width: 800px;\n}\n\n.index__container___2gzlG {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}",""]),t.locals={time:"index__time___1Kdnf",subTitle:"index__subTitle___3fSHC",center:"index__center___3SbbJ",row:"index__row___137le",label:"index__label____u1OQ",card:"index__card___33UVw",back:"index__back___3vNX_",space:"index__space___2Ky-K",container:"index__container___2gzlG"},e.exports=t},283:function(e,t,n){(t=n(110)(!1)).push([e.i,".list__current___2DlKi {\n  background-color: #ffd6e7;\n  color: black;\n  font-weight: bold;\n}\n",""]),t.locals={current:"list__current___2DlKi"},e.exports=t},316:function(e,t,n){(t=n(110)(!1)).push([e.i,".search__container___1yZLk {\n  padding-top: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.search__form___2FF0h {\n  max-width: 800px;\n  width: 100%;\n}\n\n.search__button___2kEqm .ant-form-item-control {\n  display: flex;\n  align-items: center;\n}\n",""]),t.locals={container:"search__container___1yZLk",form:"search__form___2FF0h",button:"search__button___2kEqm"},e.exports=t},34:function(e,t,n){var a=n(109),r=n(226);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(35),l=n(164),u=n.n(l),s=n(92),m=n.n(s),f=n(36),p=n(21),_=n(62),d=n(140),b=n(165),E={};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=Object(p.b)(),y=Object(f.c)({router:Object(_.b)(g),search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":t.type;var n=m()(t,["type"]);return v(v({},e),n);default:return e}}}),O=Object(f.d)(Object(f.a)(Object(d.a)(g)),Object(f.a)(b.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),x=Object(f.e)(y,E,O),j=n(7),w=n(46),k=n.n(w),N=n(67),S=n(31),P=n(393),C=n(396),T=n(178),D=n(397),M=n(44),R=n(68),I=n(400),F=n(391),z=n(398),K=n(402),H={icon:"./notification.png",vibrate:[200,100,200],renotify:!0,tag:"notify"},X=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){try{if(!("Notification"in window))return void console.log("This browser does not support desktop notification");Notification.requestPermission((function(t){"granted"===t&&(e.current=!0)}))}catch(e){}}),[]),Object(a.useCallback)((function(t){try{e.current&&new Notification(t,H)}catch(e){}}),[])},q=n(166),A=n.n(q),L=n(34),U=n.n(L),V=n(394),G=n(401);var B=r.a.memo((function(e){var t=Object(a.useState)(!1),n=k()(t,2),c=n[0],o=n[1],i=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]);return Object(a.useEffect)((function(){o(e.visible)}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{shape:"round",onClick:i,icon:r.a.createElement(G.a,null)},"系統通知"),r.a.createElement(V.a,{title:"系統通知",visible:c,onCancel:i,footer:[r.a.createElement(M.a,{key:"submit",type:"primary",onClick:i},"關閉")]},e.children))})),J=n(129),W=n.n(J),Q=n(399),Y=n(395),Z=n(173),$=n.n(Z);var ee,te=r.a.memo((function(e){var t=e.data,n=void 0===t?[]:t,a=e.current_number,c=void 0===a?0:a;return r.a.createElement(Y.b,{bordered:!0,dataSource:n,renderItem:function(e){var t,n="".concat(e.number," ").concat(e.message),a=function(e){var t="";switch(e){case"registered":t="warning";break;case"success":t="success";break;case"cancel":default:t="default"}return t}(e.status);return e.number==c&&(a="processing",t=$.a.current),r.a.createElement(Y.b.Item,{key:e.number,className:t},r.a.createElement(Q.a,{status:a,text:n}))}})})),ne=n(66),ae=n.n(ne),re=n(80),ce=n.n(re),oe=(n(305),r.a.memo((function(e){var t=Object(j.g)(),n=Object(a.useCallback)((function(){t.push("/appointment")}),[]);return r.a.createElement(N.a,{className:U.a.title},r.a.createElement(S.a,{xs:24},r.a.createElement(M.a,{type:"primary",shape:"circle",onClick:n,icon:r.a.createElement(K.a,null),className:U.a.back,size:"large"}),e.room))})));var ie=r.a.memo((function(){var e=Object(j.h)(),t=e.room,n=e.timecode,c=Object(a.useState)({current_number:0}),o=k()(c,2),i=o[0],l=o[1],u=Object(a.useState)(0),s=k()(u,2),m=s[0],f=s[1],p=Object(a.useState)({percent:100,status:"normal"}),_=k()(p,2),d=_[0],b=_[1],E=Object(a.useState)(!1),h=k()(E,2),v=h[0],g=h[1],y=Object(a.useState)(!1),O=k()(y,2),x=O[0],w=O[1],M=X(),K=Object(a.useCallback)((function(e){var t=ae.a.toNumber(e.target.value);requestAnimationFrame((function(){return f(t)}))}),[]),H=Object(a.useCallback)((function(e){e.preventDefault(),e.currentTarget.blur()}),[]);Object(a.useEffect)((function(){return ae.a.isEmpty(i)||g(!0),(ee=new A.a).postMessage({type:"fetch",room:t,timeCode:n}),ee.onmessage=function(e){var t=e.data;l(t),g(!1)},function(){ee&&ee.terminate()}}),[t,n]);var q=r.a.createElement(oe,{room:i.room}),L=Object(a.useMemo)((function(){switch(n){case"1":return"上午";case"2":return"下午";case"3":return"晚上"}}),[n]);Object(a.useEffect)((function(){var e,t=ae.a.subtract(m,i.current_number),n=100*ae.a.divide(i.current_number,m);switch(!0){case t<=20&&t>0:e="exception";break;case 0==t:e="success";break;default:e="active"}b({percent:n=t>0?n:100,status:e})}),[m,i.current_number]),Object(a.useEffect)((function(){x&&M("診間目前燈號: ".concat(i.current_number))}),[x,i.current_number]);var V=Object(a.useMemo)((function(){return"error"==i.type?r.a.createElement(R.a,{image:R.a.PRESENTED_IMAGE_SIMPLE,description:"查無資料"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:U.a.row},r.a.createElement(S.a,{xs:24},r.a.createElement(F.a,{direction:"vertical"},r.a.createElement(ce.a,{data:["看診時段",L]}),r.a.createElement(ce.a,{data:["最近更新",W()().format("MM-DD HH:mm")]}),r.a.createElement(ce.a,{data:["總人數",i.total]}),r.a.createElement(ce.a,{data:["過號人數",ae.a.size(i.register)]}))),r.a.createElement(S.a,{xs:24},r.a.createElement("div",{className:U.a.center},r.a.createElement(C.a,{type:"circle",percent:d.percent,status:d.status,width:180,strokeWidth:8,format:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:U.a.subTitle},"".concat(i.current_number)))}})))),r.a.createElement(N.a,null,r.a.createElement(B,null,r.a.createElement(F.a,{direction:"vertical"},r.a.createElement("div",null,r.a.createElement(I.a,{checkedChildren:"開啟",unCheckedChildren:"關閉",defaultChecked:x,onChange:function(e){return w(e)}})),r.a.createElement(D.a,{style:{width:100},min:0,max:1024,type:"number",placeholder:"就診號",onChange:K,onPressEnter:H})))))}),[i,d]);return r.a.createElement("div",{className:U.a.container},r.a.createElement(F.a,{direction:"vertical",className:U.a.space,size:12},r.a.createElement(P.a,{title:q,loading:!i.init,className:U.a.card},r.a.createElement(T.a,{spinning:v},V)),r.a.createElement(P.a,{loading:!i.init,className:U.a.card},r.a.createElement(T.a,{spinning:v},r.a.createElement(te,{data:i.list,current_number:i.current_number}))),r.a.createElement(z.a,null)))})),le=Object(i.c)((function(e){return{}}),(function(e){return{}}))(ie),ue=n(16),se=n(79),me=n(403),fe=n(392),pe=n(105),_e=n.n(pe),de=se.a.Option;var be=r.a.memo((function(e){var t=e.room,n=e.timecode,a=e.onFinish;return r.a.createElement("div",{className:_e.a.container},r.a.createElement(P.a,{className:_e.a.form},r.a.createElement(fe.a,{onFinish:a,name:"search",initialValues:{room:t,timecode:n}},r.a.createElement(fe.a.Item,{name:"room",rules:[{required:!0,message:"請輸入診間號"}]},r.a.createElement(D.a,{placeholder:"診間號碼",type:"number",prefix:r.a.createElement(me.a,null)})),r.a.createElement(fe.a.Item,{name:"timecode",rules:[{required:!0,message:"請選擇時段"}]},r.a.createElement(se.a,{placeholder:"看診時段"},r.a.createElement(de,{value:"1"},"上午"),r.a.createElement(de,{value:"2"},"下午"),r.a.createElement(de,{value:"3"},"晚上"))),r.a.createElement(fe.a.Item,{className:_e.a.button},r.a.createElement(M.a,{type:"primary",htmlType:"submit"},"查詢")))))})),Ee=Object(i.c)((function(e){return{timecode:e.search.timecode,room:e.search.room}}),(function(e){return{onFinish:function(t){var n=t.room,a=t.timecode;e({type:"SET_SEARCH",room:n,timecode:a}),e(Object(ue.d)("/appointment/".concat(n,"/").concat(a)))}}}))(be),he=n(188),ve=n.n(he),ge=n(189),ye=n.n(ge),Oe=n(190),xe=n.n(Oe),je=n(191),we=n.n(je),ke=n(138),Ne=n.n(ke),Se=n(192),Pe=n.n(Se),Ce=n(1),Te=n.n(Ce),De=n(132),Me={404:{img:"https://gw.alipayobjects.com/zos/rmsportal/KpnpchXsobRgLElEozzI.svg",title:"PAGE NOT FOUND",desc:"The link you clicked may be broken or the page may have been removed"},500:{img:"https://gw.alipayobjects.com/zos/rmsportal/RVRUAYdCGeYNBWoKiIwB.svg",title:"500",desc:"功能建置中"}},Re=(n(388),function(e){var t=e.className,n=(e.linkElement,e.type),a=e.title,c=e.desc,o=e.img,i=e.actions,l=m()(e,["className","linkElement","type","title","desc","img","actions"]),u=n in Me?n:"404",s=Te()("exception",t);return r.a.createElement("div",Pe()({className:s},l),r.a.createElement("div",{className:"imgBlock"},r.a.createElement("div",{className:"imgEle",style:{backgroundImage:"url(".concat(o||Me[u].img,")")}})),r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,a||Me[u].title),r.a.createElement("div",{className:"desc"},c||Me[u].desc),r.a.createElement("div",{className:"actions"},i||r.a.createElement(De.a,{to:"/"},r.a.createElement(M.a,{type:"primary"},"HomePage")))))});function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ne()(e);if(t){var r=Ne()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return we()(this,n)}}var Fe=function(e){xe()(n,e);var t=Ie(n);function n(e){return ve()(this,n),t.call(this,e)}return ye()(n,[{key:"render",value:function(){return r.a.createElement(Re,null)}}]),n}(r.a.PureComponent),ze=function(){return r.a.createElement(_.a,{history:g},r.a.createElement(j.d,null,r.a.createElement(j.b,{exact:!0,path:"/",render:function(){return r.a.createElement(j.a,{to:"/appointment"})}}),r.a.createElement(j.b,{exact:!0,path:"/appointment",component:Ee}),r.a.createElement(j.b,{exact:!0,path:"/appointment/:room/:timecode",component:le}),r.a.createElement(j.b,{path:"*",component:Fe})))};n(389);o.a.render(r.a.createElement(i.a,{store:x},r.a.createElement(ze,null)),document.getElementById("index"))}})}));